{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\danin\\\\Desktop\\\\Academic\\\\Courses\\\\JavaScript\\\\JS Exercise 3\\\\client\\\\src\\\\Login.js\";\nimport React from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass LoginWindow extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      password: \"\"\n    };\n    this.handle_login_click = this.handle_login_click.bind(this);\n    this.handle_email_change = this.handle_email_change.bind(this);\n    this.handle_password_change = this.handle_password_change.bind(this);\n  }\n  handle_email_change(event) {\n    this.setState({\n      email: event.target.value\n    });\n  }\n  handle_password_change(event) {\n    this.setState({\n      password: event.target.value\n    });\n  }\n  async handle_login_click() {\n    const response = await this.login();\n    const response_text = await response.text();\n    if (response.status == 200) {\n      document.cookie = response_text;\n      location.href = \"/homepage.html\";\n    } else if (response.status == 404) {\n      alert(\"Email doesn't exist\");\n    } else if (response.status == 401) {\n      alert(\"Wrong password\");\n    } else if (response.status == 403) {\n      alert(\"User needs to be approved by admin\");\n    }\n  }\n  async login() {\n    try {\n      const promise = fetch('/api/users/login', {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        method: 'POST',\n        body: JSON.stringify({\n          email: this.state.email,\n          password: this.state.password\n        })\n      });\n      return promise;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"../images/logo.png\",\n        id: \"site_logo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"center_elem\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"medium_window center_elem border\",\n        children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Email:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: this.state.email,\n                onChange: this.handle_email_change\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 63\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 59\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Password:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                value: this.state.password,\n                onChange: this.handle_password_change\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 66\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 62\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: \"2\",\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: [\"Don't have an account? \", /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"/register.html\",\n                  children: \"Register\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 73,\n                  columnNumber: 75\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: \"2\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: this.handle_login_click,\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this);\n  }\n}","map":{"version":3,"names":["React","LoginWindow","Component","constructor","props","state","email","password","handle_login_click","bind","handle_email_change","handle_password_change","event","setState","target","value","response","login","response_text","text","status","document","cookie","location","href","alert","promise","fetch","headers","method","body","JSON","stringify","err","console","log","render"],"sources":["C:/Users/danin/Desktop/Academic/Courses/JavaScript/JS Exercise 3/client/src/Login.js"],"sourcesContent":["import React from \"react\";\r\n\r\nclass LoginWindow extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n        this.state = {\r\n            email: \"\",\r\n            password: \"\"\r\n          };\r\n\t\tthis.handle_login_click = this.handle_login_click.bind(this);\r\n        this.handle_email_change = this.handle_email_change.bind(this);\r\n        this.handle_password_change = this.handle_password_change.bind(this);\r\n\t}\r\n\r\n    handle_email_change(event){\r\n        this.setState({email: event.target.value})\r\n    }\r\n\r\n    handle_password_change(event){\r\n        this.setState({password: event.target.value})\r\n    }\r\n\r\n    async handle_login_click(){\r\n        const response = await this.login();\r\n        const response_text = await response.text();\r\n        if (response.status == 200) {\r\n            document.cookie = response_text;\r\n            location.href = \"/homepage.html\";\r\n        }\r\n        else if(response.status == 404){\r\n            alert(\"Email doesn't exist\");\r\n        }\r\n        else if(response.status == 401){\r\n            alert(\"Wrong password\");\r\n        }\r\n        else if(response.status == 403){\r\n            alert(\"User needs to be approved by admin\");\r\n        }\r\n    }\r\n\r\n    async login() {\r\n        try{\r\n            const promise = fetch('/api/users/login',\r\n            {\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                method: 'POST',\r\n                body: JSON.stringify({email: this.state.email, password: this.state.password})\r\n            })\r\n            return promise;\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n        }\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn(\r\n            <div>\r\n                <img src=\"../images/logo.png\" id=\"site_logo\"></img>\r\n                <h1 className=\"center_elem\">Login</h1>\r\n                <table className=\"medium_window center_elem border\">\r\n                    <tbody>\r\n                        <tr>\r\n                            <td><label>Email:</label></td><td><input type=\"text\" value={this.state.email} onChange={this.handle_email_change}></input></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td><label>Password:</label></td><td><input type=\"password\" value={this.state.password} onChange={this.handle_password_change}></input></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colSpan=\"2\"><label>Don't have an account? <a href=\"/register.html\">Register</a></label></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colSpan=\"2\"><button onClick={this.handle_login_click}>Login</button></td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        ) \r\n\t}\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}