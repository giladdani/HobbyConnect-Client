{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DropDatabaseOperation = exports.DropCollectionOperation = void 0;\nconst operation_1 = require(\"./operation\");\nconst command_1 = require(\"./command\");\n/** @internal */\nclass DropCollectionOperation extends command_1.CommandOperation {\n  constructor(db, name, options) {\n    super(db, options);\n    this.options = options;\n    this.name = name;\n  }\n  execute(server, session, callback) {\n    super.executeCommand(server, session, {\n      drop: this.name\n    }, (err, result) => {\n      if (err) return callback(err);\n      if (result.ok) return callback(undefined, true);\n      callback(undefined, false);\n    });\n  }\n}\nexports.DropCollectionOperation = DropCollectionOperation;\n/** @internal */\nclass DropDatabaseOperation extends command_1.CommandOperation {\n  constructor(db, options) {\n    super(db, options);\n    this.options = options;\n  }\n  execute(server, session, callback) {\n    super.executeCommand(server, session, {\n      dropDatabase: 1\n    }, (err, result) => {\n      if (err) return callback(err);\n      if (result.ok) return callback(undefined, true);\n      callback(undefined, false);\n    });\n  }\n}\nexports.DropDatabaseOperation = DropDatabaseOperation;\noperation_1.defineAspects(DropCollectionOperation, [operation_1.Aspect.WRITE_OPERATION]);\noperation_1.defineAspects(DropDatabaseOperation, [operation_1.Aspect.WRITE_OPERATION]);","map":{"version":3,"mappings":";;;;;;AAAA;AACA;AASA;AACA,MAAaA,uBAAwB,SAAQC,0BAAyB;EAIpEC,YAAYC,EAAM,EAAEC,IAAY,EAAEC,OAA8B;IAC9D,KAAK,CAACF,EAAE,EAAEE,OAAO,CAAC;IAClB,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACD,IAAI,GAAGA,IAAI;EAClB;EAEAE,OAAO,CAACC,MAAc,EAAEC,OAAsB,EAAEC,QAA2B;IACzE,KAAK,CAACC,cAAc,CAACH,MAAM,EAAEC,OAAO,EAAE;MAAEG,IAAI,EAAE,IAAI,CAACP;IAAI,CAAE,EAAE,CAACQ,GAAG,EAAEC,MAAM,KAAI;MACzE,IAAID,GAAG,EAAE,OAAOH,QAAQ,CAACG,GAAG,CAAC;MAC7B,IAAIC,MAAM,CAACC,EAAE,EAAE,OAAOL,QAAQ,CAACM,SAAS,EAAE,IAAI,CAAC;MAC/CN,QAAQ,CAACM,SAAS,EAAE,KAAK,CAAC;IAC5B,CAAC,CAAC;EACJ;;AAhBFC;AAsBA;AACA,MAAaC,qBAAsB,SAAQhB,0BAAyB;EAGlEC,YAAYC,EAAM,EAAEE,OAA4B;IAC9C,KAAK,CAACF,EAAE,EAAEE,OAAO,CAAC;IAClB,IAAI,CAACA,OAAO,GAAGA,OAAO;EACxB;EACAC,OAAO,CAACC,MAAc,EAAEC,OAAsB,EAAEC,QAA2B;IACzE,KAAK,CAACC,cAAc,CAACH,MAAM,EAAEC,OAAO,EAAE;MAAEU,YAAY,EAAE;IAAC,CAAE,EAAE,CAACN,GAAG,EAAEC,MAAM,KAAI;MACzE,IAAID,GAAG,EAAE,OAAOH,QAAQ,CAACG,GAAG,CAAC;MAC7B,IAAIC,MAAM,CAACC,EAAE,EAAE,OAAOL,QAAQ,CAACM,SAAS,EAAE,IAAI,CAAC;MAC/CN,QAAQ,CAACM,SAAS,EAAE,KAAK,CAAC;IAC5B,CAAC,CAAC;EACJ;;AAbFC;AAgBAG,yBAAa,CAACnB,uBAAuB,EAAE,CAACmB,kBAAM,CAACC,eAAe,CAAC,CAAC;AAChED,yBAAa,CAACF,qBAAqB,EAAE,CAACE,kBAAM,CAACC,eAAe,CAAC,CAAC","names":["DropCollectionOperation","command_1","constructor","db","name","options","execute","server","session","callback","executeCommand","drop","err","result","ok","undefined","exports","DropDatabaseOperation","dropDatabase","operation_1","WRITE_OPERATION"],"sources":["C:\\Users\\danin\\node_modules\\mongodb\\src\\operations\\drop.ts"],"sourcesContent":["import { Aspect, defineAspects } from './operation';\nimport { CommandOperation, CommandOperationOptions } from './command';\nimport type { Callback } from '../utils';\nimport type { Server } from '../sdam/server';\nimport type { Db } from '../db';\nimport type { ClientSession } from '../sessions';\n\n/** @public */\nexport type DropCollectionOptions = CommandOperationOptions;\n\n/** @internal */\nexport class DropCollectionOperation extends CommandOperation<boolean> {\n  options: DropCollectionOptions;\n  name: string;\n\n  constructor(db: Db, name: string, options: DropCollectionOptions) {\n    super(db, options);\n    this.options = options;\n    this.name = name;\n  }\n\n  execute(server: Server, session: ClientSession, callback: Callback<boolean>): void {\n    super.executeCommand(server, session, { drop: this.name }, (err, result) => {\n      if (err) return callback(err);\n      if (result.ok) return callback(undefined, true);\n      callback(undefined, false);\n    });\n  }\n}\n\n/** @public */\nexport type DropDatabaseOptions = CommandOperationOptions;\n\n/** @internal */\nexport class DropDatabaseOperation extends CommandOperation<boolean> {\n  options: DropDatabaseOptions;\n\n  constructor(db: Db, options: DropDatabaseOptions) {\n    super(db, options);\n    this.options = options;\n  }\n  execute(server: Server, session: ClientSession, callback: Callback<boolean>): void {\n    super.executeCommand(server, session, { dropDatabase: 1 }, (err, result) => {\n      if (err) return callback(err);\n      if (result.ok) return callback(undefined, true);\n      callback(undefined, false);\n    });\n  }\n}\n\ndefineAspects(DropCollectionOperation, [Aspect.WRITE_OPERATION]);\ndefineAspects(DropDatabaseOperation, [Aspect.WRITE_OPERATION]);\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}